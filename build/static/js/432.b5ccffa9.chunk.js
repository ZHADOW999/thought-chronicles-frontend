"use strict";(self.webpackChunkmy_project=self.webpackChunkmy_project||[]).push([[432],{7432:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var l=s(3338),r=s(9321),o=s(8429),a=s(2074),n=s(9950),c=s(8),i=s(7082),d=s(7539),u=s(4414);const x=()=>{const[e,t]=(0,n.useState)(!1),{id:s}=(0,o.g)(),{data:x,loading:m,error:h}=(0,r.A)(`https://tc.a.7o7.cx/api/blogs/${s}`),{userData:g}=(0,c.A)("/api/users/me"),f=(0,o.Zp)();return(0,u.jsxs)("div",{className:"bg-bg-color-light1",children:[m&&(0,u.jsxs)("div",{className:"min-h-screen flex w-full justify-center items-center flex-col",children:[(0,u.jsxs)("div",{class:"loader book",children:[(0,u.jsx)("figure",{class:"page"}),(0,u.jsx)("figure",{class:"page"}),(0,u.jsx)("figure",{class:"page"})]}),(0,u.jsx)("h1",{className:"load",children:"Loading"})]}),h&&(0,u.jsx)("div",{className:"text-4xl mt-40 w-[80%] m-auto flex flex-col gap-5 justify-center items-center",children:h}),x&&(0,u.jsxs)("div",{className:"pt-32 md:w-[70%] w-[90%] m-auto flex flex-col gap-5 justify-center ",children:[(0,u.jsx)("h2",{className:"text-2xl md:text-4xl ",children:x.Blog.title}),(0,u.jsxs)("div",{className:"flex flex-col md:flex-row  justify-between md:items-center",children:[(0,u.jsxs)("div",{className:"w-full mb-2 md:mb-0 flex flex-row  justify-start self-start h-auto",children:[(0,u.jsx)(a.N_,{to:`/profile/${x.Blog.owner_id}`,children:(0,u.jsx)(d.A,{size:30,userId:x.Blog.owner_id,altText:`User ${x.Blog.owner_id}'s Profile Picture`})}),(0,u.jsxs)("div",{className:"w-full ml-5 flex-row  gap-10 flex  md:mt-0",children:[(0,u.jsx)(a.N_,{to:`/profile/${x.Blog.owner_id}`,className:"cursor-pointer hover:underline font-semibold",children:x.Blog.owner.author}),(0,u.jsx)("p",{className:"opacity-50 text-1 flex justify-center items-center",children:(e=>{const t=new Date(e).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}).toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)})(x.Blog.created_at)})]})]}),g&&g.id===x.Blog.owner_id&&(0,u.jsxs)("div",{className:"flex gap-5",children:[(0,u.jsx)("button",{onClick:()=>t((e=>!e)),className:"text-red-500 hover:underline",children:"delete"}),e&&(0,u.jsx)("div",{className:"fixed top-0 right-0 overflow-auto w-full h-full z-50 bg-black/50",children:(0,u.jsxs)("div",{className:"mt-52 m-auto flex flex-col items-center w-[90%] md:w-[30%] h-auto bg-white p-10 rounded-lg",children:[(0,u.jsx)("h2",{className:"text-2xl font-bold text-center mb-5",children:"Are you sure you want to delete this post ? \ud83d\udc40"}),(0,u.jsxs)("div",{className:"flex gap-5",children:[(0,u.jsx)("button",{onClick:async()=>{try{await l.A.delete(`/api/blogs/${s}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}),console.log("Blog deleted successfully"),f(-1)}catch(h){console.error("Error deleting blog:",h)}},className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-all ease-in-out duration-300",children:"Yes"}),(0,u.jsx)("button",{onClick:()=>t((e=>!e)),className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-all ease-in-out duration-300",children:"No"})]})]})}),(0,u.jsx)(a.N_,{to:`/edit/${s}`,className:"text-blue-600 hover:underline duration-300",children:"edit"})]})]}),(0,u.jsx)("div",{className:"max-w-full prose blog-content",dangerouslySetInnerHTML:{__html:i.A.sanitize(x.Blog.body,{ADD_TAGS:["video","source"],ADD_ATTR:["controls","autoplay","muted","loop","poster","src","type"]})}})]})]})}},9321:(e,t,s)=>{s.d(t,{A:()=>n});var l=s(9950),r=s(9246),o=s(917),a=s(4414);const n=(e,t)=>{const[s,n]=(0,l.useState)(null),[c,i]=(0,l.useState)(null),[d,u]=(0,l.useState)(!0);return(0,l.useEffect)((()=>{(async()=>{try{u(!0);const s=t?{search:t}:{},l=t?`${e}?search=${encodeURIComponent(t)}`:e,o=await r.A.get(l,{params:s});if(o.status<200||o.status>=300)throw new Error("Could not get data from that resource");n(o.data),i(null)}catch(s){r.A.isAxiosError(s)?s.response?(s.response.status,i((0,a.jsx)(o.A,{}))):i(`Network Error: ${s.message}`):i(`An unexpected error occurred: ${s.message||"An error occurred"}`)}finally{u(!1)}})()}),[e,t]),{data:s,loading:d,error:c}}}}]);